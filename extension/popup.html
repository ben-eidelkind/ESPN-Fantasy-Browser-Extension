<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESPN Fantasy Exporter</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <main>
      <h1>ESPN Fantasy Exporter</h1>
      <section class="field-group">
        <label for="leagueId">League ID</label>
        <div class="inline">
          <input type="text" id="leagueId" placeholder="123456" />
          <button id="detectButton" class="secondary">Detect on this Tab</button>
        </div>
      </section>
      <section class="field-group">
        <label for="season">Season</label>
        <input type="number" id="season" min="2000" max="2099" />
        <p class="hint">Default season picks the latest season after July.</p>
      </section>
      <section class="field-group">
        <div class="inline">
          <label for="includeRaw">Include raw ESPN payload in results</label>
          <input type="checkbox" id="includeRaw" />
        </div>
      </section>
      <section class="field-group supabase">
        <div class="header">
          <h2>Supabase Destination</h2>
          <button id="openOptions" class="link-button">Edit in Options</button>
        </div>
        <label for="supabaseUrl">Project URL</label>
        <input type="text" id="supabaseUrl" readonly />
        <label for="supabaseAnonKey">Anon Key</label>
        <textarea id="supabaseAnonKey" rows="2" readonly></textarea>
        <label for="supabaseTable">Table</label>
        <input type="text" id="supabaseTable" readonly />
      </section>
      <section class="buttons">
        <button id="testButton" class="secondary">Test Connection</button>
        <button id="fetchButton">Fetch Data</button>
        <button id="downloadButton" class="secondary" disabled>Download JSON</button>
        <button id="syncButton" disabled>Sync to Supabase</button>
      </section>
      <section class="status">
        <h2>Status</h2>
        <div id="statusLog" class="status-log"></div>
      </section>
      <section class="preview">
        <div class="preview-header">
          <h2>Preview</h2>
          <button id="togglePreview" class="secondary" disabled>Show more</button>
        </div>
        <pre id="jsonPreview" class="collapsed"></pre>
      </section>
    </main>
    <script src="popup.js"></script>
  </body>
</html>
